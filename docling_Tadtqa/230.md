At the end of each reporting period, the Company evaluates all available information at that time to determine if it is more likely than not that some or all of these credits will be utilized. As of October 31, 2019, 2018, and 2017, the Company determined that a total of $1.8 million, $0.7 million, and $0.6 million, respectively, would be recovered. Accordingly, those amounts were released from the valuation allowance and benefited deferred tax expense in the respective periods.

The differences between the consolidated effective income tax rate and the federal statutory rate effective during the applicable year presented are as follows:

|                                        | Years Ended October 31,   | Years Ended October 31,   | Years Ended October 31,   |
|----------------------------------------|---------------------------|---------------------------|---------------------------|
|                                        | 2019                      | 2018                      | 2017                      |
|                                        | (In thousands)            | (In thousands)            | (In thousands)            |
| Income taxes at statutory rate         | $ 13,408                  | $ 7,132                   | $ 148,585                 |
| Discrete benefit resulting from TCJA   | -                         | (37,505)                  | -                         |
| State income taxes                     | 1,189                     | 1,014                     | 9,038                     |
| State income tax credits               | (2,139)                   | (804)                     | (606)                     |
| Expiration of state income tax credits | 4,121                     | 4,117                     | 642                       |
| Federal income tax credits             | (474)                     | (460)                     | (390)                     |
| Federal manufacturers deduction        | -                         | -                         | (11,527)                  |
| Excess tax benefits                    | (1,388)                   | (1,638)                   | (3,345)                   |
| Nondeductible expenses                 | 1,786                     | 1,890                     | 3,506                     |
| Change in valuation allowance          | (5,380)                   | (5,297)                   | (1,106)                   |
| Other                                  | (570)                     | 677                       | (12)                      |
| Income tax expense (benefit)           | $ 10,553                  | $ (30,874)                | $ 144,785                 |

## 8. Earnings Per Share

Certain share-based payment awards entitling holders to receive non-forfeitable dividends before vesting are considered participating securities and thus included in the calculation of basic earnings per share, to the extent they are dilutive. These awards are included in the calculation of basic earnings per share under the two-class method. The two-class method allocates earnings for the period between common shareholders and other security holders. The participating awards receiving dividends are allocated the same amount of income as if they were outstanding shares.

The following table presents earnings per share (in thousands).

|                                                                          | For the years ended   | For the years ended   | For the years ended   |
|--------------------------------------------------------------------------|-----------------------|-----------------------|-----------------------|
|                                                                          | October 31, 2019      | October 31, 2018      | October 31, 2017      |
| Net income                                                               | $ 53,294              | $ 61,431              | $ 279,745             |
| Distributed and undistributed (earnings) to unvested restricted          | (778)                 | (878)                 | (4,285)               |
| k Distributed and undistributed earnings to common shareholders -  Basic | 52,516                | 60,553                | 275,460               |
| Weighted average shares outstanding - Basic                              | 21,829                | 22,429                | 22,393                |
| Weighted average shares outstanding - Diluted                            | 21,829                | 22,429                | 22,393                |
| Earnings per common share - Basic                                        | $ 2.41                | $ 2.70                | $ 12.30               |
| Earnings per common share - Diluted                                      | $ 2.41                | $ 2.70                | $ 12.30               |